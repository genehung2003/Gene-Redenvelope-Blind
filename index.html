<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å…¨ç›²ç´…åŒ…æŒ‘æˆ° - 2026 é¦¬å¹´è¡Œå¤§é‹</title>
    
    <!-- Open Graph / Facebook / LINE é è¦½è¨­å®š -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://genehung2003.github.io/Gene-Redenvelope-Blind/">
    <meta property="og:title" content="é¦¬å¹´å®‰å¤ªåº§ï¼ï¼">
    <meta property="og:description" content="2026 é¦¬å¹´è¡Œå¤§é‹ï¼Œå››å­£ç™¼è²¡ã€äº”è·¯è²¡ç¥ã€å…­å…­å¤§é †ï¼å¿«ä¾†æ¸¬è©¦æ‚¨çš„æ‰‹æ°£ã€‚">
    <meta property="og:image" content="https://genehung2003.github.io/Gene-Redenvelope-Blind/preview.png">

    <!-- Twitter é è¦½è¨­å®š -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="é¦¬å¹´å®‰å¤ªåº§ï¼ï¼">
    <meta name="twitter:description" content="2026 é¦¬å¹´è¡Œå¤§é‹ï¼Œå¿«ä¾†è©¦è©¦æ‚¨çš„æ‰‹æ°£ã€‚">
    <meta name="twitter:image" content="https://genehung2003.github.io/Gene-Redenvelope-Blind/preview.png">

    <!-- å¼•å…¥ Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- å¼•å…¥ React å’Œ ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- å¼•å…¥ Babel ç”¨ä¾†è§£æ JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <style>
        /* ç¦æ­¢é¸å–æ–‡å­—ï¼Œè®“é»æ“Šé«”é©—æ›´åƒ APP */
        body { -webkit-user-select: none; user-select: none; -webkit-tap-highlight-color: transparent; }
    </style>
</head>
<body class="bg-red-800">
    <div id="root"></div>

    <script type="text/babel">
        // ç°¡å–®çš„ Icon çµ„ä»¶ (å–ä»£ lucide-react ä¾è³´ï¼Œç¢ºä¿å–®æª”å¯åŸ·è¡Œ)
        const Icons = {
            Gift: () => <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect x="3" y="8" width="18" height="4" rx="1"/><path d="M12 8v13"/><path d="M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7"/><path d="M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5"/></svg>,
            Shuffle: () => <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M2 18h1.4c1.3 0 2.5-.6 3.3-1.7l14.2-12.6"/><path d="M2 6h1.4c1.3 0 2.5.6 3.3 1.7l14.2 12.6"/><path d="M22 2l-4 4"/><path d="M22 22l-4-4"/></svg>,
            Delete: () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M20 5H9l-7 7 7 7h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2Z"/><line x1="18" y1="9" x2="12" y2="15"/><line x1="12" y1="9" x2="18" y2="15"/></svg>,
            RotateCcw: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5"/></svg>
        };

        function App() {
            const [digitMode, setDigitMode] = React.useState(4);
            const [inputValues, setInputValues] = React.useState([]);
            const [shuffledKeys, setShuffledKeys] = React.useState([]);
            const [isRevealed, setIsRevealed] = React.useState(false);
            const [pressedIndices, setPressedIndices] = React.useState([]);

            React.useEffect(() => {
                shuffleKeypad();
            }, [digitMode]);

            const shuffleKeypad = () => {
                const numbers = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9'];
                for (let i = numbers.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [numbers[i], numbers[j]] = [numbers[j], numbers[i]];
                }
                setShuffledKeys(numbers);
                setInputValues([]);
                setPressedIndices([]);
                setIsRevealed(false);
            };

            const handlePress = (value, index) => {
                if (isRevealed) return;
                if (inputValues.length < digitMode) {
                    setInputValues((prev) => [...prev, value]);
                    setPressedIndices((prev) => [...prev, index]);
                }
            };

            const handleDelete = () => {
                if (isRevealed) return;
                setInputValues((prev) => prev.slice(0, -1));
                setPressedIndices((prev) => prev.slice(0, -1));
            };

            const handleReveal = () => {
                if (inputValues.length === 0) return;
                setIsRevealed(true);
            };

            const getAmountString = () => {
                if (inputValues.length === 0) return "0";
                return parseInt(inputValues.join("")).toLocaleString();
            };

            return (
                <div className="min-h-screen bg-red-800 flex flex-col items-center justify-center p-4 font-sans text-yellow-100 overflow-hidden relative">
                    {/* Watermark */}
                    <div className="fixed bottom-4 right-4 text-yellow-500/60 text-sm font-bold pointer-events-none z-50 tracking-widest bg-red-900/20 px-2 py-1 rounded-md backdrop-blur-xs">
                        æˆå¤§å¤–ç§‘å°æ´ª
                    </div>

                    {/* Background Elements */}
                    <div className="fixed top-0 left-0 w-full h-full pointer-events-none overflow-hidden">
                        <div className="absolute top-10 right-10 w-64 h-64 bg-yellow-500/10 rounded-full blur-3xl"></div>
                        <div className="absolute bottom-10 left-10 w-48 h-48 bg-red-500/20 rounded-full blur-2xl"></div>
                    </div>

                    {/* Confetti Effect */}
                    {isRevealed && (
                        <div className="fixed inset-0 pointer-events-none z-50 overflow-hidden">
                            {[...Array(25)].map((_, i) => (
                                <div key={i} className="absolute animate-bounce" 
                                     style={{
                                         left: `${Math.random() * 100}%`,
                                         top: `-20px`,
                                         backgroundColor: i % 2 === 0 ? '#fbbf24' : '#ef4444',
                                         width: '10px',
                                         height: '10px',
                                         borderRadius: i % 3 === 0 ? '50%' : '2px',
                                         animation: `fall ${2 + Math.random() * 3}s linear infinite`,
                                         animationDelay: `${Math.random() * i * 0.1}s`
                                     }}>
                                </div>
                            ))}
                            <style>{`
                                @keyframes fall {
                                    0% { transform: translateY(0) rotate(0deg); opacity: 1; }
                                    100% { transform: translateY(100vh) rotate(360deg); opacity: 0; }
                                }
                            `}</style>
                        </div>
                    )}

                    {/* Header with Custom Image */}
                    <div className="w-full max-w-md mb-2 text-center z-10">
                        <div className="flex justify-center mb-0">
                            <img 
                                src="4C7D2619-4FBA-421E-BB73-8A0D4A0BAD1D-nobg.png" 
                                alt="Lucky Red Envelope" 
                                className="w-64 h-64 object-contain drop-shadow-2xl animate-pulse"
                            />
                        </div>
                        <p className="text-red-200 text-base mb-4 opacity-90 font-bold tracking-wider">è’™è‘—çœ¼è½‰å¸³ï¼Œå…¨æ†‘å¤©æ„</p>
                        <div className="flex justify-center gap-3 mb-6">
                            {[
                                { val: 4, label: "4å­£ç™¼è²¡" },
                                { val: 5, label: "5è·¯è²¡ç¥" },
                                { val: 6, label: "6å…­å¤§é †" }
                            ].map(item => (
                                <button 
                                    key={item.val}
                                    onClick={() => setDigitMode(item.val)}
                                    disabled={isRevealed}
                                    className={`px-4 py-2 rounded-full text-sm font-black transition-all ${digitMode === item.val ? 'bg-yellow-500 text-red-900 shadow-[0_0_15px_rgba(234,179,8,0.4)] scale-105' : 'bg-red-900/40 text-red-300 border border-red-700 opacity-60 hover:opacity-100'}`}
                                >
                                    {item.label}
                                </button>
                            ))}
                        </div>
                    </div>

                    {/* Display Area */}
                    <div className="w-full max-w-md bg-red-900/60 backdrop-blur-sm rounded-2xl p-6 shadow-xl border border-red-500/50 mb-6 relative z-10">
                        <div className="text-center">
                            <div className="text-red-300 text-xl mb-3 uppercase tracking-widest font-bold flex items-center justify-center gap-3">
                                <span className="animate-pulse">ğŸ</span>
                                {isRevealed ? "ç´…åŒ…å…¥å¸³ä¸­" : "å®‰å¤ªåº§å°ˆç”¨éµç›¤"}
                                <span className="animate-pulse">ğŸ</span>
                            </div>
                            <div className="h-20 flex items-center justify-center">
                                {isRevealed ? (
                                    <div className="animate-in zoom-in duration-500 flex flex-col items-center">
                                        <div className="text-5xl font-black text-transparent bg-clip-text bg-gradient-to-b from-yellow-300 to-yellow-600 drop-shadow-sm">
                                            ${getAmountString()}
                                        </div>
                                        <div className="text-yellow-500/80 text-xs mt-2 font-bold tracking-[0.2em]">æ­å–œç™¼è²¡ Â· å¤§å‰å¤§åˆ©</div>
                                    </div>
                                ) : (
                                    <div className="flex gap-2 flex-wrap justify-center">
                                        {[...Array(digitMode)].map((_, idx) => {
                                            const hasValue = idx < inputValues.length;
                                            return (
                                                <div key={idx} className={`${digitMode === 6 ? 'w-10 h-12' : 'w-12 h-14'} flex items-center justify-center rounded-lg border-2 transition-all duration-300 ${hasValue ? 'bg-yellow-500 border-yellow-300 scale-105 shadow-[0_0_15px_rgba(234,179,8,0.5)]' : 'bg-red-950/40 border-red-700/50'}`}>
                                                    {hasValue ? <div className="text-2xl text-red-900 font-bold">?</div> : <div className="w-2 h-2 rounded-full bg-red-800"></div>}
                                                </div>
                                            );
                                        })}
                                    </div>
                                )}
                            </div>
                        </div>
                    </div>

                    {/* Controls */}
                    <div className="w-full max-w-md flex justify-between items-center mb-4 px-2 z-10">
                        <button onClick={shuffleKeypad} className="flex items-center gap-2 px-4 py-2 bg-red-900/80 hover:bg-red-950 text-red-300 rounded-full text-sm font-medium transition-all border border-red-700 active:scale-95">
                            <Icons.Shuffle /> é‡æ–°æ´—ç‰Œ
                        </button>
                        <div className="text-yellow-200/60 text-xs font-mono bg-red-900/50 px-3 py-1 rounded-full border border-red-800">
                            {isRevealed ? "å·²é–‹ç" : `${inputValues.length} / ${digitMode}`}
                        </div>
                    </div>

                    {/* Keypad */}
                    <div className="w-full max-w-md grid grid-cols-3 gap-3 z-10">
                        {shuffledKeys.slice(0, 9).map((num, index) => {
                            const wasPressed = pressedIndices.includes(index);
                            return (
                                <button key={`key-${index}`} onClick={() => handlePress(num, index)} disabled={isRevealed || inputValues.length >= digitMode} className={`h-20 rounded-xl relative overflow-hidden transition-all duration-300 touch-manipulation flex items-center justify-center shadow-lg ${isRevealed ? (wasPressed ? 'bg-yellow-500 text-red-900 ring-2 ring-yellow-300 scale-95' : 'bg-red-900/40 text-red-400/50 border border-red-800') : (inputValues.length >= digitMode ? 'bg-red-800/50 opacity-50 cursor-not-allowed' : 'bg-gradient-to-b from-red-600 to-red-700 hover:from-red-500 hover:to-red-600 border-b-4 border-red-900 active:border-b-0 active:translate-y-1')}`}>
                                    {isRevealed ? <span className={`text-3xl font-bold ${wasPressed ? 'animate-bounce' : ''}`}>{num}</span> : <div className="flex flex-col items-center gap-1 opacity-80"><div className="w-8 h-10 border-2 border-yellow-400/30 rounded bg-red-800 flex items-center justify-center"><span className="text-yellow-500 text-xs font-bold">ç¦</span></div></div>}
                                    {!isRevealed && wasPressed && <div className="absolute inset-0 bg-yellow-500/20 animate-pulse"></div>}
                                </button>
                            );
                        })}
                        <button onClick={handleDelete} disabled={isRevealed || inputValues.length === 0} className={`h-20 rounded-xl flex items-center justify-center transition-all active:scale-95 ${isRevealed || inputValues.length === 0 ? 'bg-transparent text-red-500/20' : 'bg-red-900/50 text-red-300 hover:bg-red-900 border border-red-700'}`}>
                            <Icons.Delete />
                        </button>
                        {(() => {
                            const num = shuffledKeys[9];
                            const index = 9;
                            const wasPressed = pressedIndices.includes(index);
                            return (
                                <button onClick={() => handlePress(num, index)} disabled={isRevealed || inputValues.length >= digitMode} className={`h-20 rounded-xl relative overflow-hidden transition-all duration-300 touch-manipulation flex items-center justify-center shadow-lg ${isRevealed ? (wasPressed ? 'bg-yellow-500 text-red-900 ring-2 ring-yellow-300 scale-95' : 'bg-red-900/40 text-red-400/50 border border-red-800') : (inputValues.length >= digitMode ? 'bg-red-800/50 opacity-50 cursor-not-allowed' : 'bg-gradient-to-b from-red-600 to-red-700 hover:from-red-500 hover:to-red-600 border-b-4 border-red-900 active:border-b-0 active:translate-y-1')}`}>
                                    {isRevealed ? <span className={`text-3xl font-bold ${wasPressed ? 'animate-bounce' : ''}`}>{num}</span> : <div className="flex flex-col items-center gap-1 opacity-80"><div className="w-8 h-10 border-2 border-yellow-400/30 rounded bg-red-800 flex items-center justify-center"><span className="text-yellow-500 text-xs font-bold">ç¦</span></div></div>}
                                    {!isRevealed && wasPressed && <div className="absolute inset-0 bg-yellow-500/20 animate-pulse"></div>}
                                </button>
                            )
                        })()}
                        {isRevealed ? (
                            <button onClick={shuffleKeypad} className="h-20 rounded-xl bg-blue-600 text-white font-bold flex flex-col items-center justify-center hover:bg-blue-700 active:scale-95 shadow-lg transition-all border-b-4 border-blue-800 active:border-b-0 active:translate-y-1">
                                <Icons.RotateCcw />
                                <span className="text-xs mt-1">å†ä¾†</span>
                            </button>
                        ) : (
                            <button onClick={handleReveal} disabled={inputValues.length !== digitMode} className={`h-20 rounded-xl font-bold flex items-center justify-center shadow-lg transition-all active:scale-95 ${inputValues.length === digitMode ? 'bg-yellow-500 text-red-900 hover:bg-yellow-400 border-b-4 border-yellow-700 active:border-b-0 active:translate-y-1 animate-pulse' : 'bg-red-900/20 text-red-500/20 cursor-not-allowed'}`}>
                                <span className="text-lg">é–‹ï¼</span>
                            </button>
                        )}
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>